<!doctype html>
<!-- with jinja and Bootstrap -->
<html lang="pt-BR" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mercadex</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/styles/form.css">
  </head>
  <body>
    <!-- conteúdo -->

    <div class="form-container">
        <!-- Cabeçalho -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <a href="{{url_for('user.listar')}}" class="back-link">
                <i class="bi bi-arrow-left me-1"></i> Voltar para lista
            </a>
            <span class="badge bg-secondary mode-badge" id="modeBadge">{% if user %}EDITAR{% else %}NOVO USUÁRIO{%endif%}</span>
        </div>
        
        <!-- Formulário -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0" id="formTitle">Cadastro de Usuário</h5>
            </div>
            <div class="card-body p-4">
                <form id="userForm" c-form 
                    {% if user %}

                    method="put" 
                    action="{{url_for('user.update', id = user.id)}}"

                    {% else %}

                    method="post" 
                    action="{{url_for('user.inserir')}}"
                    
                    {%endif%}
                    >
                    <!-- Campo Nome -->
                    <div class="mb-4">
                        <label for="name" class="form-label required">Nome Completo</label>
                        <input type="text" class="form-control" id="name" placeholder="Digite o nome completo" name="nome" {%if user%}value="{{user.name}}"{%endif%} required>
                        <div class="invalid-feedback">Por favor, informe o nome completo.</div>
                    </div>
                    
                    <!-- Campo E-mail -->
                    <div class="mb-4">
                        <label for="email" class="form-label required">E-mail</label>
                        <input type="email" class="form-control" id="email" placeholder="exemplo@email.com" name="email" {%if user%}value="{{user.email}}"{%endif%} required>
                        <div class="invalid-feedback">Por favor, informe um e-mail válido.</div>
                    </div>
                    
                    <!-- Botões de Ação -->
                    <div class="d-flex justify-content-between pt-2">
                        <button type="button" class="btn btn-outline-secondary" id="clearBtn">
                            <i class="bi bi-x-circle me-1"></i> Limpar
                        </button>
                        
                        <div>
                            <button type="button" class="btn btn-outline-secondary me-2" id="toggleModeBtn">
                                <i class="bi bi-pencil-square me-1"></i> Alterar Modo
                            </button>
                            <button type="submit" class="btn btn-primary" id="submitBtn">
                                <i class="bi bi-check-circle me-1"></i> Salvar
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Informações -->
        <div class="mt-3 text-center text-muted">
            <small>Campos marcados com * são obrigatórios</small>
        </div>
    </div>

    <!-- fim do conteúdo -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="/static/scripts/form.js"></script>
    <script src="/static/scripts/cru.js"></script>
  </body>
</html>